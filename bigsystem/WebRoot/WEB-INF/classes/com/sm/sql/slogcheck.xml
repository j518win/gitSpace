<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!-- <p>Employee SqlMap.</p> @genCode: CodeGenerator Tool @CreatedAt: Fri 
	Nov 25 14:46:12 CST 2011 @author: SI-TECH @version: 1.0 -->
<sqlMap namespace="slogcheck">	<select id="queryLog" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">		select 		LOGIN_ID,		LOGIN_IP,		LOGIN_MAC,		OP_NUM,		OP_FUNC,		OP_NOTE,		OP_DATE,		USERNAME,		COMPANY		From sos_sys_log a,sos_user b where a.login_id=b.loginid(+)		<isNotEmpty prepend="and" property="qryNum">            a.OP_NUM='$qryNum$'        </isNotEmpty>        <isNotEmpty prepend="and" property="czlx">            <isEqual property="czlx" compareValue="0"> 	 				a.OP_FUNC NOT LIKE '%登录%' 	 		</isEqual> 	 		<isEqual property="czlx" compareValue="1"> 	 				a.OP_FUNC LIKE '%登录%' 	 		</isEqual>        </isNotEmpty>        <isNotEmpty prepend="and" property="qsrq">        	<![CDATA[            a.op_date>=qsrq            ]]>        </isNotEmpty>        <isNotEmpty prepend="and" property="jzrq">        	<![CDATA[            a.op_date<=jzrq            ]]>        </isNotEmpty>        <isNotEmpty prepend="and" property="czr">            b.loginid='$czr$'        </isNotEmpty>                <isNotEmpty prepend="and" property="depart">            b.company='$depart$'        </isNotEmpty>		order by a.op_date desc	</select>		<select id="queryLogCount" parameterClass="java.util.HashMap"  resultClass="java.lang.Integer">		SELECT COUNT(1) as mm From sos_sys_log a,sos_user b where a.login_id=b.loginid(+)		<isNotEmpty prepend="and" property="qryNum">            a.OP_NUM='$qryNum$'        </isNotEmpty>        <isNotEmpty prepend="and" property="czlx">            <isEqual property="czlx" compareValue="0"> 	 				a.OP_FUNC NOT LIKE '%登录%' 	 		</isEqual> 	 		<isEqual property="czlx" compareValue="1"> 	 				a.OP_FUNC LIKE '%登录%' 	 		</isEqual>        </isNotEmpty>        <isNotEmpty prepend="and" property="qsrq">        	<![CDATA[            a.op_date>=qsrq            ]]>        </isNotEmpty>        <isNotEmpty prepend="and" property="jzrq">        	<![CDATA[            a.op_date<=jzrq            ]]>        </isNotEmpty>                <isNotEmpty prepend="and" property="czr">            b.loginid='$czr$'        </isNotEmpty>                <isNotEmpty prepend="and" property="depart">            b.company='$depart$'        </isNotEmpty>        	</select>		<select id="queryLogReport"  resultClass="java.util.HashMap">		sELECT COUNT(0) AS NUM,OP_FUNC FROM SOS_SYS_LOG WHERE OP_FUNC NOT LIKE '%登录%' GROUP BY OP_FUNC	</select>		<select id="getDepart" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">		SELECT DISTINCT COMPANY FROM SOS_USER WHERE COMPANY IS NOT NULL	</select>		<select id="getCzr" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">		SELECT LOGINID,USERNAME FROM SOS_USER WHERE LOGINID IS NOT NULL	</select>	</sqlMap>